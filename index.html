<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="favicon" href="logo.png" />

  
     <!-- boostrap -->   
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"/>

     <!-- fontawesome icons -->
   <link rel="stylesheet" href="fontawesome/css/all.min.css">

   <link rel="stylesheet" href="libs/css/style.css">


    <title>Company Directory</title>
  </head>
  <body>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark shadow mb-3 sticky-top">
      <div class="container-fluid">
        <div class="navbar-brand">
          <span class="brand-gradient">Company Directory</span>
        </div>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

          <span class="navbar-nav me-2 mb-2 mb-lg-0" role="navigation">   
            <!---selectLocation in navigation used for search-->          
            <select class="btn btn-success dropdown-toggle selectLocation" name="locationInput" id="selectLocation">
                <option value="">Location</option>
              </select>  
          </span>
          
          <span class="navbar-nav me-auto mb-2 mb-lg-0" role="navigation">             
            <select class="btn btn-success dropdown-toggle selectDepartment" name="departmentInput" id="selectDepartment">
                <option value="">Department</option>
              </select>  
            </span>
         
          <form class="d-flex" role="search" method="get">
            <input
              class="form-control me-2"
              name="search"
              type="search"
              placeholder="Search"
              aria-label="Search"
              id="search"
            />
            <button class="btn btn-sm btn-success" id="searchSubmit" name="searchButton" type="button">
            <!-- Search Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
              <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
            </button>
          </form>
          
<!------------------------ADD dropdown to add employee/departmemt/location------------------>

          <div class="dropdown">
            <button class="btn btn-warning dropdown-toggle mx-3" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              ADD
          
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
              </svg>
              <i class="fa-solid fa-circle-plus"></i>
            </button>
            <ul class="dropdown-menu">
              <li>
                <button
                    type="button"
                    class="btn btn-link text-success"
                    data-bs-toggle="modal"
                    data-bs-target="#employeeDetails"
                    id="addEmployee"
                >Employee</button>
              </li>
              <li>
                <button type="button"
                class="btn btn-link text-success"
                data-bs-toggle="modal"
                data-bs-target="#departmentDetails"
                id="addDepartment"
                >Department
              </button>
              </li>
              <li>
                <button type="button"
                class="btn btn-link text-success"
                data-bs-toggle="modal"
                data-bs-target="#locationDetails"
                id="addLocation"
                >Location
                </button>
            </li>
            </ul>
          </div>

        <!-------------------------- EDIT Employee modal---------TUTOR's VERSION--------------->

          <!-- <div class="container">
  
            <button type="button" class="btn btn-outline-secondary mt-5" data-bs-toggle="modal" data-bs-target="#exampleModal" data-id="23">
              Open form modal
            </button>
          
          </div> -->
          
          <!-- the first of the data-bs attributes removes the backdrop and prevents the modal from being closed by clicking outside of it. The second disables the ESC key preventing it from closing the modal -->
          
          <div id="employeeDetails" class="modal fade" tabindex="-1" data-bs-backdrop="false" data-bs-keyboard="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
            
            <!--   the last two classes centre the modal and, if the content is too long, ensures  -->
            <!--   that the header and footer are always on display by making the body scroll -->
            
            <div class="modal-dialog modal-sm modal-dialog-centered modal-dialog-scrollable">
                 
              <div class="modal-content shadow"> 
                
                <div class="modal-header text-bg-dark">
                  <h5 class="modal-title" id="employeeDetailsAction">Edit employee</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
          
                <div class="modal-body">
                  <div class="col">
                    <div class="alert alert-warning d-none" role="alert" id="employeeAlert"></div>
                  </div>
                    
                  <form id="employeeFrom">
          
                    <input type="hidden" id="employeeID">
          
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="firstName" placeholder="First name" required>
                      <label for="firstName">First name</label>
                    </div>
          
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="lastName" placeholder="Last name" required>
                      <label for="lastName">Last name</label>
                    </div>
          
                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="jobTitle" placeholder="Job title" required>
                      <label for="jobTitle">Job Title</label>
                    </div>          
          
                    <div class="form-floating mb-3">
                      <input type="email" class="form-control" id="emailAddress" placeholder="Email address" required>
                      <label for="emailAddress">Email Address</label>
                    </div>    
          
                    <div class="form-floating">
                      <select class="form-select" id="department" placeholder="Department">
                      </select>
                      <label for="department">Department</label>
                    </div>  
          
                  </form>
          
                </div>
          
                <div class="modal-footer">
                  <button type="submit" form="employeeForm" class="btn btn-outline-secondary btn-sm myBtn">SAVE</button>
                  <button type="button" class="btn btn-outline-secondary btn-sm myBtn" data-bs-dismiss="modal">CANCEL</button>
                </div>
           
              </div>
              
            </div>
            
          </div>

          <!-- end of edit employee modal -->


          

           <!-- ADD NEW/EDIT DEPARTMENT modal -->

           <div class="modal fade" id="departmentDetails" tabindex="-1" data-bs-backdrop="false" data-bs-keyboard="false" aria-labelledby="addDepartment-label" aria-hidden="true">
            <div class="modal-dialog modal-sm modal-dialog-centered">
              <div class="modal-content shadow">
                <div class="modal-header text-bg-dark justify-content-center">
                  <h5 class="modal-title" id="departmentDetailsAction">Add New Department</h5>
                </div>
                <div class="modal-body">
                  <form name="newDepartmentForm">

                    <input type="hidden" id="departmentIDInput">
                    <div class="col">
                      <div class="alert alert-warning d-none" role="alert" id="departmentAlert"></div>
                    </div>

                    <div class="form-floating mb-3">
                      <input type="text" class="form-control" id="newFepartmentInput" placeholder="Department name" required>
                      <label for="departmentName">Department name</label>
                    </div>

                    <div class="form-floating">
                      <select
                      class="form-select selectLocation"
                      name="locationInput"
                      id="locationSelect" > 
                      </select>      <!-- in modal - locationSelect used for sending data to insertDepartment.php -->
                      <label for="location">Location</label>
                    </div>  

                    <div class="modal-footer">
                      <button type="submit" form="exampleForm" class="btn btn-outline-secondary btn-sm myBtn"  id="submitDepartment">Add Department</button>
                      <button type="button" class="btn btn-outline-secondary btn-sm myBtn" data-bs-dismiss="modal">Close</button>
                    </div>
                    
                   </form>
                  </div>
                </div>
              </div>
            </div>  
               
           <!-- end of modal  -->

                  
            <!-- ADD NEW/EDIT LOCATION modal -->

            <div class="modal fade" id="locationDetails" tabindex="-1" data-bs-backdrop="false" data-bs-keyboard="false" aria-labelledby="addDepartment-label" aria-hidden="true">
              <div class="modal-dialog modal-sm modal-dialog-centered">
                <div class="modal-content shadow">
                  <div class="modal-header text-bg-dark justify-content-center">
                    <h5 class="modal-title" id="locationDetailsAction">Add New Location</h5>
                  </div>
                  <div class="modal-body">
                    <form name="newLocationForm">

                      <input type="hidden" id="locationIDInput">
                      <div class="col">
                        <div class="alert alert-warning d-none" role="alert" id="locationAlert"></div>
                      </div>

                      <div class="form-floating">
                        <input
                        type="text"
                        class="form-control form-control-sm"
                        placeholder="Location Name"
                        aria-describedby="LocationNameHelp"
                        id="locationInput"
                        required
                      />
                      </div>  

                      <div class="modal-footer">
                        <button type="submit" form="exampleForm" class="btn btn-outline-secondary btn-sm myBtn"  id="submitLocation">Add Location</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm myBtn" data-bs-dismiss="modal">Close</button>
                      </div>

                     </form>
                    </div>
                  </div>
                </div>
              </div>  
             <!-- end of modal  -->

      </div>   
   </div>
  </nav>
    
      
      <!-- Table navigation tabs -->
 
    <div class="container">
 
      <div class="row">
        <div class="col">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="home-tab"
                data-bs-toggle="tab"
                data-bs-target="#home-tab-pane"
                type="button"
                role="tab"
                aria-controls="home-tab-pane"
                aria-selected="true"
              >
                Personnel
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="profile-tab"
                data-bs-toggle="tab"
                data-bs-target="#profile-tab-pane"
                type="button"
                role="tab"
                aria-controls="profile-tab-pane"
                aria-selected="false"
              >
                Departments
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="contact-tab"
                data-bs-toggle="tab"
                data-bs-target="#contact-tab-pane"
                type="button"
                role="tab"
                aria-controls="contact-tab-pane"
                aria-selected="false"
              >
                Locations
              </button>
            </li>
          </ul>
          <div class="tab-content" id="myTabContent">
            <div
              class="tab-pane fade show active"
              id="home-tab-pane"
              role="tabpanel"
              aria-labelledby="home-tab"
              tabindex="0"
            >
            <table class="table table-striped align-middle mb-0">
              <thead>
                <tr>
                  <th scope="col">First name </th>
                  <th scope="col">Last name</th>
                  <th scope="col">Department</th>
                  <th scope="col">Location</th>
                  <th>Details</th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody id="employeesList"></tbody>
            </table>
            </div>
            <div
              class="tab-pane fade"
              id="profile-tab-pane"
              role="tabpanel"
              aria-labelledby="profile-tab"
              tabindex="1"
            >
            <table class="table table-striped align-middle mb-0"">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th>Edit</th>
                  <th>Delete</th>   
                </tr>
              </thead>
              <tbody id="departmentsList">
                <!-- <td><button><i class="fa-regular fa-user"></i></button></td> -->
              </tbody>
            </table>
            </div>
            <div
              class="tab-pane fade"
              id="contact-tab-pane"
              role="tabpanel"
              aria-labelledby="contact-tab"
              tabindex="2"
            >
            <table class="table table-striped align-middle mb-0"">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody id="locationsList">
              </tbody>
            </table>
            </div>
          </div>

          

   <!-- view DETAILS MODAL  -->

   <div class="modal fade" tabindex="-1" id="view" area-labelledby="addEmployee-label">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header text-bg-dark justify-content-center">
          <h5 class="modal-title">Employee details</h5>
        </div>
        <div class="modal-body">

          <ul class="list-group">
            <li class="list-group-item">
              <span class="fw-bolder d-inline-block w-50">Name</span><span id="employeeName"></span>
            </li>
            <li class="list-group-item">
              <span class="fw-bolder d-inline-block w-50">Email</span><span id="email"></span>
            </li>
            <li class="list-group-item">
              <span class="fw-bolder d-inline-block w-50">Job Title</span><span id="jobTitle"></span>
            </li>
            <li class="list-group-item">
              <span class="fw-bolder d-inline-block w-50">Department</span><span id="viewDepartment"></span>
            </li>
            <li class="list-group-item">
              <span class="fw-bolder d-inline-block w-50">Location</span><span id="location"></span>
            </li>
            
          </ul>

        <div class="modal-footer">
          <button
          type="button"
          class="btn btn-sm btn-primary"
          data-bs-dismiss="modal"
        >
          Close
        </button>


        </div>
        </div>
     </div>      
  </div>
  </div>

  <!-- end of view employee details modal -->
  


    <!-- CHECK department for dependancies before deleting it -->
  
    <!-- MODAL- CANNOT DELETE -->
    <div id="cantDeleteDepartmentModal" class="modal fade" tabindex="-1" data-bs-backdrop="false" data-bs-keyboard="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
      
      <!--   the last two classes centre the modal and, if the content is too long, ensures  -->
      <!--   that the header and footer are always on display by making the body scroll -->
      
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        
        <!-- As the backdrop is disabled we can use the Bootstrap shadow class to add definition to the dialog -->
        
        <div class="modal-content shadow"> 
                 
          <div class="modal-header">
            <h5 class="modal-title">Cannot remove department ...</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
    
          <div class="modal-body">
    
            You cannot remove the entry for <span id="cantDeleteDeptName" class="fw-bold"></span> because it has <span id="pc" class="fw-bold"></span> employees assigned to it.
    
          </div>
    
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">OK</button>
          </div>
          
        </div>
        
      </div>
      
    </div>


    <!-- MODAL - CAN DELETE  -->
    
    <div id="deleteDepartment" class="modal fade" tabindex="-1" data-bs-backdrop="false" data-bs-keyboard="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
      
      <!--   the last two classes centre the modal and, if the content is too long, ensures  -->
      <!--   that the header and footer are always on display by making the body scroll -->
      
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        
        <!-- As the backdrop is disabled we can use the Bootstrap shadow class to add definition to the dialog -->
        
        <div class="modal-content shadow"> 
                 
          <div class="modal-header">
            <h5 class="modal-title">Remove department?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
    
          <div class="modal-body">
    
            Are you sure that you want to remove the entry for <span id="departmentName" class="fw-bold"></span>?
    
          </div>
    
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary myBtn" data-bs-dismiss="modal">Yes</button>
            <button type="button" class="btn btn-outline-secondary myBtn" data-bs-dismiss="modal">No</button>
          </div>
          
        </div>
        
      </div>
      
    </div>
      
          
    <!-- end of checking delete modal -->


    <script src="libs/js/jquery-3.7.0.min.js"></script>

       <!-- boostrap -->
    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- fontawesome icons -->
    <script defer src="fontawesome/js/all.min.js"></script>
    <script src="fontawesome/js/fontawesome.js" data-auto-replace-svg="nest"></script>
    <script src="fontawesome/js/solid.js"></script>
    <script src="fontawesome/js/brands.js"></script>

    <script src="libs/js/script.js"></script>
  </body>
</html>













